(function(e){function t(t){for(var o,a,s=t[0],c=t[1],u=t[2],l=0,d=[];l<s.length;l++)a=s[l],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);m&&m(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,a=1;a<n.length;a++){var s=n[a];0!==r[s]&&(o=!1)}o&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},a={app:0},r={app:0},i=[];function s(e){return c.p+"js/"+({about:"about"}[e]||e)+"."+{about:"fc1c1247"}[e]+".js"}function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={about:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var o="css/"+({about:"about"}[e]||e)+"."+{about:"703f8041"}[e]+".css",r=c.p+o,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var u=i[s],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===o||l===r))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){u=d[s],l=u.getAttribute("data-href");if(l===o||l===r)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var o=t&&t.target&&t.target.src||r,i=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=o,delete a[e],m.parentNode.removeChild(m),n(i)},m.href=r;var f=document.getElementsByTagName("head")[0];f.appendChild(m)})).then((function(){a[e]=0})));var o=r[e];if(0!==o)if(o)t.push(o[2]);else{var i=new Promise((function(t,n){o=r[e]=[t,n]}));t.push(o[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=s(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(m);var n=r[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",d.name="ChunkLoadError",d.type=o,d.request=a,n[1](d)}r[e]=void 0}};var m=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var m=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"21bb":function(e,t,n){"use strict";n("2dad")},"2dad":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Sidebar"),n("Menu")],1)},r=[],i=n("2591"),s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"sidebar-page"},[o("section",{staticClass:"sidebar-layout"},[o("b-sidebar",{attrs:{position:"static",mobile:e.mobile,"expand-on-hover":e.expandOnHover,reduce:e.reduce,fullheight:e.fullheight,overlay:e.overlay,type:"is-dark",open:""}},[o("div",{staticClass:"p-1"},[o("router-link",{attrs:{to:{name:"Home"}}},[o("div",{staticClass:"block my-3"},[o("img",{attrs:{src:n("cf05"),alt:"Otto Klaus"}})])]),o("b-menu",{staticClass:"is-custom-mobile"},[o("b-menu-list",{attrs:{label:"Menú"}},[o("b-menu-item",{attrs:{icon:"home",label:" Inicio",tag:"router-link",to:{name:"Home"}}}),o("b-menu-item",{attrs:{icon:"info",label:" Acerca de",pack:"fas",tag:"router-link",to:{name:"About"}}}),o("b-menu-item",{attrs:{active:"",icon:"user-cog",label:" Administración"}},[o("b-menu-item",{attrs:{icon:"th-list",label:" Productos",tag:"router-link",to:{name:"Products"}}})],1),o("b-menu-item",{attrs:{icon:"user-alt",label:" Mi cuenta"}},[o("b-menu-item",{attrs:{pack:"far",icon:"user",label:"Perfil",tag:"router-link",to:{name:"Profile"}}})],1)],1),o("b-menu-list",[o("b-menu-item",{attrs:{icon:"link",label:" Links"}},[o("b-menu-item",{attrs:{icon:"link",label:" Buefy",target:"_blank",href:"https://buefy.org"}}),o("b-menu-item",{attrs:{icon:"link",label:" Vue",target:"_blank",href:"https://vuejs.org"}}),o("b-menu-item",{attrs:{icon:"link",label:" DL",target:"_blank",href:"https://desafiolatam.com"}})],1)],1)],1)],1)]),o("transition",{attrs:{name:"component-fade",mode:"out-in"}},[o("router-view")],1)],1)])},c=[],u=(n("ac1f"),n("5319"),n("5530")),l=n("2f62"),d={name:"Sidebar",data:function(){return{expandOnHover:!0,mobile:"reduce",reduce:!0,fullheight:!0,overlay:!1}},computed:Object(u["a"])(Object(u["a"])({},Object(l["b"])(["getUser"])),{},{activeUser:function(){return this.getUser}}),methods:{logoutUser:function(){var e=this;i["a"].auth().signOut().then((function(){console.log("Se ha cerrado la sesión."),e.success(),e.$router.replace({name:"Login"})})).catch((function(e){console.error(e)}))},success:function(){this.$buefy.toast.open({message:"¡Has salido correctamente!",type:"is-success"})}}},m=d,f=(n("f203"),n("2877")),p=Object(f["a"])(m,s,c,!1,null,null,null),b=p.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-menu m-3"},[e.activeUser?n("b-dropdown",{attrs:{position:"is-bottom-left","aria-role":"list"},scopedSlots:e._u([{key:"trigger",fn:function(t){var o=t.active;return n("button",{staticClass:"button is-warning"},[n("span",{staticClass:"mr-2"},[e.getUser.isAnonymous?n("b-image",{staticClass:"image is-24x24",attrs:{src:"https://firebasestorage.googleapis.com/v0/b/sist-inventario-otto-klaus.appspot.com/o/anonymous-user.png?alt=media&token=32d5ffa2-bd37-4a1b-b03f-60ddb9e184f0",rounded:"",bordered:""}}):n("b-image",{staticClass:"image is-24x24",attrs:{src:e.getUser.photoURL,rounded:"",bordered:""}})],1),e.getUser.isAnonymous?n("span",[e._v(" Anónimo ")]):n("span",[e._v(" "+e._s(e.getUser.displayName?e.getUser.displayName:e.getUser.email)+" ")]),n("b-icon",{attrs:{icon:o?"chevron-up":"chevron-down"}})],1)}}],null,!1,2311972963),model:{value:e.navigation,callback:function(t){e.navigation=t},expression:"navigation"}},[e.getUser.isAnonymous?n("b-dropdown-item",{attrs:{custom:"","aria-role":"menuitem"}},[e._v(" Eres "),n("b",[e._v("Anónimo")])]):n("b-dropdown-item",{attrs:{custom:"","aria-role":"menuitem"}},[n("p",{staticClass:"is-size-6"},[e._v(" Registrado como "),n("b",[e._v(e._s(e.getUser.displayName))])]),n("p",{staticClass:"is-size-7"},[e._v(" "+e._s(e.getUser.email)+" ")])]),n("hr",{staticClass:"dropdown-divider",attrs:{"aria-role":"menuitem"}}),n("b-dropdown-item",{attrs:{"has-link":"",value:"perfil","aria-role":"menuitem"}},[n("router-link",{attrs:{to:{name:"Profile"}}},[n("b-icon",{attrs:{icon:"user"}}),e._v(" Perfil ")],1)],1),n("b-dropdown-item",{attrs:{"has-link":"",value:"logout","aria-role":"menuitem"},on:{click:e.logoutUser}},[n("a",[n("b-icon",{attrs:{icon:"sign-out-alt"}}),e._v(" Cerrar sesión ")],1)])],1):n("b-dropdown",{attrs:{position:"is-bottom-left","aria-role":"list"},scopedSlots:e._u([{key:"trigger",fn:function(t){var o=t.active;return n("button",{staticClass:"button is-warning"},[n("span",{attrs:{icon:"link"}},[e._v("Visitante")]),n("b-icon",{attrs:{icon:o?"chevron-up":"chevron-down"}})],1)}}]),model:{value:e.navigation,callback:function(t){e.navigation=t},expression:"navigation"}},[n("b-dropdown-item",{attrs:{"has-link":"",value:"login","aria-role":"menuitem"}},[n("router-link",{attrs:{to:{name:"Login"}}},[n("b-icon",{attrs:{icon:"sign-in-alt"}}),e._v(" Iniciar sesión ")],1)],1)],1)],1)},h=[],v={name:"Menu",data:function(){return{navigation:"home"}},computed:Object(u["a"])(Object(u["a"])({},Object(l["b"])(["getUser"])),{},{activeUser:function(){return this.getUser}}),methods:{logoutUser:function(){var e=this;i["a"].auth().signOut().then((function(){console.log("Se ha cerrado la sesión."),e.success(),e.$router.replace({name:"Login"})})).catch((function(e){console.error(e)}))},success:function(){this.$buefy.toast.open({message:"¡Has salido correctamente!",type:"is-success"})}},mounted:function(){this.activeUser()}},y=v,k=(n("bb78"),Object(f["a"])(y,g,h,!1,null,null,null)),_=k.exports,w={name:"App",components:{Sidebar:b,Menu:_},created:function(){var e=this;i["a"].auth().onAuthStateChanged((function(t){t?t.isAnonymous?(e.$store.dispatch("user",t),console.log("Sesión iniciada | Usuario: Anónimo."),console.log(t)):(e.$store.dispatch("user",t),console.log("Sesión iniciada | Usuario: ".concat(t.email,".")),console.log(t)):(e.$store.dispatch("user",null),console.log("Sesión no iniciada."),console.log(t))})),this.$store.dispatch("dbInventory")}},j=w,U=(n("5c0b"),Object(f["a"])(j,a,r,!1,null,null,null)),C=U.exports,O=(n("45fc"),n("d3b7"),n("8c4f")),S=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},A=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container"},[o("div",{staticClass:"home"},[o("h1",{staticClass:"title home_title has-text-centered"},[e._v("Bienvenido/a al sitio de Sistema de Inventario de...")]),o("div",{staticClass:"home__image"},[o("img",{attrs:{alt:"logo",src:n("cf05")}})]),o("div",{staticClass:"notification is-success my-5"},[o("p",[e._v("En este sitio puedes administrar el stock de todos los productos disponibles en Otto Klaus. ")]),o("p",[e._v("Primero debes iniciar sesión como administrador para ver el contenido en inventario.")])])])])}],P={name:"Home"},E=P,x=(n("21bb"),Object(f["a"])(E,S,A,!1,null,null,null)),I=x.exports;o["a"].use(O["a"]);var L=[{path:"/",name:"Home",alias:["/home","/inicio"],component:I},{path:"/acerca",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}},{path:"/entrar",name:"Login",alias:["/login","/ingresar"],component:function(){return n.e("about").then(n.bind(null,"a55b"))}},{path:"/productos",name:"Products",component:function(){return n.e("about").then(n.bind(null,"e6dc"))},meta:{requiresAdmin:!0}},{path:"/perfil",name:"Profile",component:function(){return n.e("about").then(n.bind(null,"c66d"))}},{path:"*",redirect:["/home"]}],$=new O["a"]({mode:"history",base:"/",routes:L});$.beforeEach((function(e,t,n){var o=i["a"].auth().currentUser,a=e.matched.some((function(e){return e.meta.requiresAdmin}));o&&a&&o.isAnonymous?n({name:"Login"}):n()}));var N=$;n("4160"),n("159b");o["a"].use(l["a"]);var H=new l["a"].Store({state:{user:null,inventory:[]},getters:{getUser:function(e){return e.user},getInventory:function(e){return e.inventory}},mutations:{mutateUser:function(e,t){e.user=t},mutateInventory:function(e,t){e.inventory=t}},actions:{user:function(e,t){var n=e.commit;n("mutateUser",t)},dbInventory:function(e){var t=e.commit;i["a"].firestore().collection("juguetes").onSnapshot((function(e){var n=[];e.forEach((function(e){n.push({id:e.id,codigo:e.data().codigo,nombre:e.data().nombre,stock:e.data().stock,precio:e.data().precio,imagen:e.data().imagen})})),console.log("Inventario:"),console.table(n),t("mutateInventory",n)}),(function(e){return console.error(e)}))},updateProduct:function(e,t){i["a"].firestore().collection("juguetes").doc(t.id).update({codigo:t.codigo,nombre:t.nombre,stock:t.stock,precio:t.precio,imagen:t.imagen}).then((function(){return console.log("El producto seleccionado se ha actualizado.")})).catch((function(e){return console.error(e)}))},deleteProduct:function(e,t){i["a"].firestore().collection("juguetes").doc(t).delete().then((function(){return console.log("El producto seleccionado se ha eliminado.")})).catch((function(e){return console.error(e)}))},addProduct:function(e,t){i["a"].firestore().collection("juguetes").add({codigo:t.codigo,nombre:t.nombre,stock:t.stock,precio:t.precio,imagen:t.imagen}).then((function(){return console.log("Se ha añadido un nuevo producto.")})).catch((function(e){return console.error(e)}))},updateProfile:function(e,t){var n=i["a"].auth().currentUser;n.updateProfile({displayName:t.displayName,photoURL:t.avatar}).then((function(){return console.log("El perfil se ha actualizado.")})).catch((function(e){return console.error(e)})),n.updateEmail(t.email).then((function(){return console.log("El correo se ha actualizado.")})).catch((function(e){return console.error(e)}))}}}),M={apiKey:"AIzaSyB9mheLnfKdX8vWGfjgN1yxOjfLK6kkVQ0",authDomain:"sist-inventario-otto-klaus.firebaseapp.com",projectId:"sist-inventario-otto-klaus",storageBucket:"sist-inventario-otto-klaus.appspot.com",messagingSenderId:"723110009546",appId:"1:723110009546:web:2475bc209aed979f84f233"},z=n("ecee"),B=n("ad3d"),T=n("c074"),K=n("b702"),q=n("289d");n("5abe");i["a"].initializeApp(M),z["c"].add(T["y"],T["x"],K["a"],T["A"],T["k"],T["l"],T["v"],T["n"],T["h"],T["s"],T["t"],T["i"],T["j"],T["m"],T["c"],T["a"],T["b"],T["u"],T["f"],T["e"],T["d"],T["z"],T["B"],T["q"],T["g"],T["w"],T["o"],T["p"],T["r"]),o["a"].component("font-awesome-icon",B["a"]),o["a"].component("vue-fontawesome",B["a"]),o["a"].use(q["a"],{defaultIconComponent:"vue-fontawesome",defaultIconPack:"fas"}),o["a"].config.productionTip=!1,new o["a"]({router:N,store:H,render:function(e){return e(C)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";n("9c0c")},"6fa3":function(e,t,n){},9741:function(e,t,n){},"9c0c":function(e,t,n){},bb78:function(e,t,n){"use strict";n("6fa3")},cf05:function(e,t,n){e.exports=n.p+"img/logo.aa0c3b93.png"},f203:function(e,t,n){"use strict";n("9741")}});
//# sourceMappingURL=app.956655f7.js.map